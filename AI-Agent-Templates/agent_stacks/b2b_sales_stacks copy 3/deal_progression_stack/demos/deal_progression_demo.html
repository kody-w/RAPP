<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deal Progression Intelligence - Sales Command Center</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
            background: #f8f9fa;
            height: 100vh;
            display: flex;
            overflow: hidden;
            color: #323130;
        }

        /* Sidebar */
        .sidebar {
            width: 260px;
            background: #ffffff;
            display: flex;
            flex-direction: column;
            border-right: 1px solid #edebe9;
        }

        /* Sidebar Header */
        .sidebar-header {
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 10px;
            border-bottom: 1px solid #edebe9;
            height: 48px;
        }

        .copilot-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .copilot-icon svg {
            width: 24px;
            height: 24px;
        }

        .sidebar-title {
            font-size: 14px;
            font-weight: 600;
            color: #323130;
        }

        /* Search Box */
        .search-container {
            padding: 8px 16px;
            border-bottom: 1px solid #edebe9;
        }

        .search-box {
            position: relative;
            width: 100%;
        }

        .search-input {
            width: 100%;
            padding: 4px 8px 4px 32px;
            border: 1px solid #d1d1d1;
            border-radius: 4px;
            font-size: 12px;
            height: 32px;
            background: #ffffff;
        }

        .search-input:focus {
            outline: none;
            border-color: #0078d4;
        }

        /* Chat List */
        .chat-list {
            flex: 1;
            overflow-y: auto;
            padding: 8px 0;
        }

        .chat-section-title {
            padding: 8px 16px 4px;
            font-size: 12px;
            font-weight: 600;
            color: #605e5c;
        }

        .chat-item {
            padding: 8px 16px;
            cursor: pointer;
            display: flex;
            align-items: flex-start;
            gap: 8px;
            position: relative;
        }

        .chat-item:hover {
            background: #f3f2f1;
        }

        .chat-item.active {
            background: #f3f2f1;
        }

        .chat-item-icon {
            width: 20px;
            height: 20px;
            background: linear-gradient(135deg, #0078d4, #40e0d0);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 10px;
            flex-shrink: 0;
        }

        .chat-item-content {
            flex: 1;
            min-width: 0;
        }

        .chat-item-title {
            font-size: 13px;
            color: #323130;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 2px;
        }

        .chat-item-preview {
            font-size: 12px;
            color: #605e5c;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* New Chat Button */
        .new-chat-container {
            padding: 12px 16px;
            border-top: 1px solid #edebe9;
        }

        .new-chat-button {
            width: 100%;
            padding: 8px 16px;
            background: #0078d4;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 13px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: background 0.2s;
        }

        .new-chat-button:hover {
            background: #106ebe;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #f8f9fa;
        }

        /* Chat Header */
        .chat-header {
            background: #ffffff;
            border-bottom: 1px solid #edebe9;
            padding: 12px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 48px;
        }

        .chat-header-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            font-weight: 600;
            color: #323130;
        }

        .chat-controls {
            display: flex;
            gap: 8px;
        }

        .control-button {
            padding: 6px 12px;
            background: #ffffff;
            border: 1px solid #d1d1d1;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .control-button:hover:not(:disabled) {
            background: #f3f2f1;
        }

        .control-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .control-button.primary {
            background: #0078d4;
            color: white;
            border-color: #0078d4;
        }

        .control-button.primary:hover:not(:disabled) {
            background: #106ebe;
        }

        /* Chat Messages */
        .chat-container {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
            max-width: 1400px;
            width: 100%;
            margin: 0 auto;
        }

        .message {
            margin-bottom: 20px;
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .user-message {
            display: flex;
            justify-content: flex-end;
        }

        .user-message-bubble {
            background: #0078d4;
            color: white;
            padding: 12px 16px;
            border-radius: 8px 8px 0 8px;
            max-width: 70%;
            font-size: 14px;
            line-height: 1.5;
        }

        .agent-message {
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: flex-start;
        }

        .agent-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
        }

        .agent-avatar {
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, #0078d4, #40e0d0);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
            font-weight: 600;
        }

        .agent-name {
            font-size: 13px;
            font-weight: 600;
            color: #323130;
        }

        .agent-message-bubble {
            background: #ffffff;
            padding: 16px;
            border-radius: 8px;
            border: 1px solid #edebe9;
            max-width: 95%;
            font-size: 14px;
            line-height: 1.5;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }

        .agent-content {
            color: #323130;
        }

        /* Professional Sales Intelligence Framework Styles */
        .intelligence-framework {
            margin-top: 16px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        /* Framework Sections */
        .framework-section {
            background: #ffffff;
            border-left: 4px solid #0078d4;
            padding: 16px 20px;
            border-radius: 0 4px 4px 0;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        }

        .framework-header {
            text-transform: uppercase;
            font-size: 11px;
            font-weight: 700;
            color: #605e5c;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid #edebe9;
        }

        /* Signal System */
        .signal-system {
            display: flex;
            gap: 16px;
            margin-top: 12px;
        }

        .signal-column {
            flex: 1;
            background: #ffffff;
            border-radius: 8px;
            padding: 16px;
            border: 1px solid #edebe9;
        }

        .signal-column.red {
            border-left: 4px solid #dc2626;
        }

        .signal-column.yellow {
            border-left: 4px solid #eab308;
        }

        .signal-column.green {
            border-left: 4px solid #10b981;
        }

        .signal-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
            font-size: 13px;
            font-weight: 700;
            text-transform: uppercase;
        }

        .signal-header.red {
            color: #dc2626;
        }

        .signal-header.yellow {
            color: #eab308;
        }

        .signal-header.green {
            color: #10b981;
        }

        .signal-icon {
            font-size: 16px;
        }

        .signal-items {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .signal-item {
            display: flex;
            align-items: flex-start;
            gap: 8px;
            font-size: 13px;
            line-height: 1.5;
            color: #323130;
        }

        .signal-item-icon {
            flex-shrink: 0;
            margin-top: 2px;
        }

        /* Deal Dashboard */
        .deal-dashboard {
            background: #ffffff;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.08);
        }

        .dashboard-title {
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            color: #605e5c;
            margin-bottom: 16px;
            padding-bottom: 8px;
            border-bottom: 1px solid #edebe9;
        }

        .metrics-table {
            display: table;
            width: 100%;
            border-collapse: collapse;
        }

        .metrics-row {
            display: table-row;
        }

        .metrics-cell {
            display: table-cell;
            padding: 12px;
            border: 1px solid #edebe9;
            vertical-align: top;
        }

        .metric-label {
            font-size: 10px;
            text-transform: uppercase;
            color: #605e5c;
            font-weight: 600;
            margin-bottom: 4px;
            letter-spacing: 0.5px;
        }

        .metric-value {
            font-size: 18px;
            font-weight: 700;
            color: #323130;
        }

        .metric-subtext {
            font-size: 11px;
            color: #605e5c;
            margin-top: 2px;
        }

        .metric-value.red {
            color: #dc2626;
        }

        .metric-value.yellow {
            color: #eab308;
        }

        .metric-value.green {
            color: #10b981;
        }

        /* Health Breakdown */
        .health-breakdown {
            margin-top: 16px;
            background: #f8f9fa;
            padding: 12px;
            border-radius: 4px;
        }

        .health-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 6px 0;
            font-size: 13px;
        }

        .health-label {
            color: #323130;
        }

        .health-score {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .health-value {
            font-weight: 600;
        }

        .health-value.red {
            color: #dc2626;
        }

        .health-value.yellow {
            color: #eab308;
        }

        .health-value.green {
            color: #10b981;
        }

        .health-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .indicator-red {
            background: #dc2626;
        }

        .indicator-yellow {
            background: #eab308;
        }

        .indicator-green {
            background: #10b981;
        }

        /* Action Framework */
        .action-framework {
            background: #ffffff;
            border-left: 4px solid #0078d4;
            padding: 16px 20px;
            border-radius: 0 4px 4px 0;
            margin-top: 12px;
        }

        .action-section {
            margin-bottom: 20px;
        }

        .action-title {
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            color: #323130;
            margin-bottom: 8px;
        }

        .action-items {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-left: 8px;
        }

        .action-item {
            font-size: 13px;
            line-height: 1.6;
            color: #323130;
            padding-left: 16px;
            position: relative;
        }

        .action-item:before {
            content: "‚Ä¢";
            position: absolute;
            left: 0;
            color: #0078d4;
        }

        .action-meta {
            font-size: 11px;
            color: #605e5c;
            margin-left: 16px;
            margin-top: 2px;
        }

        /* Red Flag Check */
        .red-flag-check {
            background: #fee;
            border: 1px solid #dc2626;
            padding: 12px;
            border-radius: 4px;
            margin-top: 12px;
        }

        .red-flag-title {
            font-size: 12px;
            font-weight: 700;
            color: #dc2626;
            text-transform: uppercase;
            margin-bottom: 8px;
        }

        .red-flag-text {
            font-size: 13px;
            color: #323130;
        }

        /* Typing Indicator */
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 12px 16px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #605e5c;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
                opacity: 0.6;
            }
            30% {
                transform: translateY(-10px);
                opacity: 1;
            }
        }

        /* Input Area */
        .input-area {
            background: #ffffff;
            border-top: 1px solid #edebe9;
            padding: 16px 24px;
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .input-container {
            flex: 1;
            position: relative;
        }

        .message-input {
            width: 100%;
            padding: 10px 40px 10px 16px;
            border: 1px solid #d1d1d1;
            border-radius: 20px;
            font-size: 14px;
            resize: none;
            outline: none;
            font-family: inherit;
            max-height: 120px;
        }

        .message-input:focus {
            border-color: #0078d4;
        }

        .input-actions {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            gap: 4px;
        }

        .input-action-btn {
            width: 28px;
            height: 28px;
            background: none;
            border: none;
            color: #605e5c;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .input-action-btn:hover {
            background: #f3f2f1;
            color: #323130;
        }

        .send-button {
            width: 32px;
            height: 32px;
            background: #0078d4;
            border: none;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s;
        }

        .send-button:hover {
            background: #106ebe;
        }

        .send-button:disabled {
            background: #d1d1d1;
            cursor: not-allowed;
        }

        /* Battle Card Style */
        .battle-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            border-radius: 8px;
            padding: 20px;
            border: 1px solid #edebe9;
            margin-top: 12px;
        }

        .battle-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .battle-title {
            font-size: 14px;
            font-weight: 700;
            text-transform: uppercase;
            color: #323130;
        }

        .threat-level {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .threat-high {
            background: #fee;
            color: #dc2626;
        }

        .threat-medium {
            background: #fef3c7;
            color: #eab308;
        }

        /* Activity Timeline */
        .activity-timeline {
            background: #f8f9fa;
            border-radius: 4px;
            padding: 12px;
            margin-top: 12px;
        }

        .timeline-item {
            display: flex;
            gap: 8px;
            font-size: 12px;
            line-height: 1.6;
            padding: 4px 0;
        }

        .timeline-date {
            font-weight: 600;
            color: #605e5c;
            min-width: 80px;
        }

        .timeline-content {
            color: #323130;
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <div class="copilot-icon">
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <linearGradient id="copilotGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:#0078d4;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#40e0d0;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    <path d="M12 2C13.3132 2 14.6136 2.25866 15.8268 2.7612C17.0401 3.26375 18.1425 4.00035 19.0711 4.92893C19.9997 5.85752 20.7362 6.95991 21.2388 8.17317C21.7413 9.38642 22 10.6868 22 12C22 14.6522 20.9464 17.1957 19.0711 19.0711C17.1957 20.9464 14.6522 22 12 22C10.6868 22 9.38642 21.7413 8.17317 21.2388C6.95991 20.7362 5.85752 19.9997 4.92893 19.0711C3.05357 17.1957 2 14.6522 2 12C2 9.34784 3.05357 6.8043 4.92893 4.92893C6.8043 3.05357 9.34784 2 12 2ZM12 7C11.2044 7 10.4413 7.31607 9.87868 7.87868C9.31607 8.44129 9 9.20435 9 10V14C9 14.7956 9.31607 15.5587 9.87868 16.1213C10.4413 16.6839 11.2044 17 12 17C12.7956 17 13.5587 16.6839 14.1213 16.1213C14.6839 15.5587 15 14.7956 15 14V10C15 9.20435 14.6839 8.44129 14.1213 7.87868C13.5587 7.31607 12.7956 7 12 7Z" fill="url(#copilotGradient)"/>
                </svg>
            </div>
            <span class="sidebar-title">Deal Command Center</span>
        </div>

        <!-- Search -->
        <div class="search-container">
            <div class="search-box">
                <input type="text" class="search-input" placeholder="Search deals...">
            </div>
        </div>

        <!-- Chat List -->
        <div class="chat-list">
            <div class="chat-section-title">Active Deals</div>
            <div class="chat-item active">
                <div class="chat-item-icon">CE</div>
                <div class="chat-item-content">
                    <div class="chat-item-title">Contoso Enterprise</div>
                    <div class="chat-item-preview">$850K - Critical Risk</div>
                </div>
            </div>
            <div class="chat-item">
                <div class="chat-item-icon">FI</div>
                <div class="chat-item-content">
                    <div class="chat-item-title">Fabrikam Industries</div>
                    <div class="chat-item-preview">$650K - High Risk</div>
                </div>
            </div>
            <div class="chat-item">
                <div class="chat-item-icon">AW</div>
                <div class="chat-item-content">
                    <div class="chat-item-title">Adventure Works</div>
                    <div class="chat-item-preview">$425K - Medium Risk</div>
                </div>
            </div>

            <div class="chat-section-title">Recent Analysis</div>
            <div class="chat-item">
                <div class="chat-item-icon">PA</div>
                <div class="chat-item-content">
                    <div class="chat-item-title">Pipeline Analysis</div>
                    <div class="chat-item-preview">Q4 2024 Forecast</div>
                </div>
            </div>
        </div>

        <!-- New Chat -->
        <div class="new-chat-container">
            <button class="new-chat-button">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                    <path d="M8 3V13M3 8H13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                New Analysis
            </button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Chat Header -->
        <div class="chat-header">
            <div class="chat-header-title">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M9 11L12 14L22 4M21 12V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H16" stroke="#323130" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                Deal Progression Intelligence Suite
            </div>
            <div class="chat-controls">
                <button class="control-button" onclick="resetDemo()">Reset</button>
                <button class="control-button" onclick="skipMessage()">Skip</button>
                <button class="control-button" onclick="togglePause()" id="pauseButton">Pause</button>
                <button class="control-button primary" onclick="startDemo()" id="playButton">‚ñ∂ Play Demo</button>
            </div>
        </div>

        <!-- Chat Container -->
        <div class="chat-container" id="chatContainer"></div>

        <!-- Input Area -->
        <div class="input-area">
            <div class="input-container">
                <input type="text" class="message-input" placeholder="Ask about your deals..." disabled>
                <div class="input-actions">
                    <button class="input-action-btn">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M8 4V12M4 8H12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                    </button>
                </div>
            </div>
            <button class="send-button" disabled>
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                    <path d="M2 8L7 3V6C11 6 14 7 15 11C13.5 9 11.5 8 7 8V11L2 8Z" fill="white"/>
                </svg>
            </button>
        </div>
    </div>

    <script>
        // Demo conversation script with professional sales intelligence framework
        const demoScript = [
            {
                "type": "user",
                "content": "Analyze stalled deals and show me the risk signals for our pipeline",
                "typingTime": 1500,
                "delay": 1000
            },
            {
                "type": "agent",
                "content": "I've identified critical risk signals across your pipeline. Running comprehensive analysis of all stalled opportunities using your Dynamics 365 data.",
                "typingTime": 2000,
                "delay": 1500,
                "agentData": {
                    "html": `
                        <div class="intelligence-framework">
                            <div class="framework-section">
                                <div class="framework-header">üö® Deal Risk Alerts (Auto-Monitored)</div>

                                <div class="signal-system">
                                    <div class="signal-column red">
                                        <div class="signal-header red">
                                            <span class="signal-icon">üî¥</span>
                                            RED SIGNALS (URGENT - FIX IMMEDIATELY)
                                        </div>
                                        <div class="signal-items">
                                            <div class="signal-item">
                                                <span class="signal-item-icon">‚ùå</span>
                                                <span>Contoso deal: 52 days no contact (deal death zone)</span>
                                            </div>
                                            <div class="signal-item">
                                                <span class="signal-item-icon">‚ùå</span>
                                                <span>CFO ghosting on $850K opportunity - no response 35 days</span>
                                            </div>
                                            <div class="signal-item">
                                                <span class="signal-item-icon">‚ùå</span>
                                                <span>Competitor (TechCorp) mentioned favorably 3x in last call</span>
                                            </div>
                                            <div class="signal-item">
                                                <span class="signal-item-icon">‚ùå</span>
                                                <span>Budget freeze mentioned - procurement halted all new vendors</span>
                                            </div>
                                            <div class="signal-item">
                                                <span class="signal-item-icon">‚ùå</span>
                                                <span>Champion (Michael Thompson) changed roles - new role unknown</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="signal-column yellow">
                                        <div class="signal-header yellow">
                                            <span class="signal-icon">üü°</span>
                                            YELLOW SIGNALS (WATCH CLOSELY)
                                        </div>
                                        <div class="signal-items">
                                            <div class="signal-item">
                                                <span class="signal-item-icon">‚ö†Ô∏è</span>
                                                <span>CTO slow email response (8 days avg, was 1 day)</span>
                                            </div>
                                            <div class="signal-item">
                                                <span class="signal-item-icon">‚ö†Ô∏è</span>
                                                <span>Meeting rescheduled 2x - declining priority signal</span>
                                            </div>
                                            <div class="signal-item">
                                                <span class="signal-item-icon">‚ö†Ô∏è</span>
                                                <span>Technical champion going silent (no Teams activity 10 days)</span>
                                            </div>
                                            <div class="signal-item">
                                                <span class="signal-item-icon">‚ö†Ô∏è</span>
                                                <span>Legal review taking 3x longer than typical (45 days vs 15)</span>
                                            </div>
                                            <div class="signal-item">
                                                <span class="signal-item-icon">‚ö†Ô∏è</span>
                                                <span>New stakeholder appeared - VP Finance not previously involved</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="signal-column green">
                                        <div class="signal-header green">
                                            <span class="signal-icon">üü¢</span>
                                            GREEN SIGNALS (KEEP DOING THIS)
                                        </div>
                                        <div class="signal-items">
                                            <div class="signal-item">
                                                <span class="signal-item-icon">‚úì</span>
                                                <span>IT Director responds to emails within 24 hours consistently</span>
                                            </div>
                                            <div class="signal-item">
                                                <span class="signal-item-icon">‚úì</span>
                                                <span>VP Sales actively participates in all scheduled calls</span>
                                            </div>
                                            <div class="signal-item">
                                                <span class="signal-item-icon">‚úì</span>
                                                <span>Usage metrics trending upward in pilot (85% adoption)</span>
                                            </div>
                                            <div class="signal-item">
                                                <span class="signal-item-icon">‚úì</span>
                                                <span>Budget confirmed and allocated for Q1 2025</span>
                                            </div>
                                            <div class="signal-item">
                                                <span class="signal-item-icon">‚úì</span>
                                                <span>Executive sponsor engaged - CEO mentioned in board meeting</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                }
            },
            {
                "type": "user",
                "content": "Show me the deal health dashboard for Contoso Enterprise",
                "typingTime": 1400,
                "delay": 2000
            },
            {
                "type": "agent",
                "content": "Here's the comprehensive health assessment for Contoso Enterprise. Critical attention required - multiple risk factors detected.",
                "typingTime": 1800,
                "delay": 1500,
                "agentData": {
                    "html": `
                        <div class="intelligence-framework">
                            <div class="deal-dashboard">
                                <div class="dashboard-title">üìä Deal Dashboard - Live Metrics</div>

                                <div class="metrics-table">
                                    <div class="metrics-row">
                                        <div class="metrics-cell">
                                            <div class="metric-label">CLOSE PROBABILITY</div>
                                            <div class="metric-value red">38%</div>
                                            <div class="metric-subtext">Below target - needs action</div>
                                        </div>
                                        <div class="metrics-cell">
                                            <div class="metric-label">CURRENT STAGE</div>
                                            <div class="metric-value">Propose</div>
                                            <div class="metric-subtext">Stage 4 of 7</div>
                                        </div>
                                        <div class="metrics-cell">
                                            <div class="metric-label">DEAL NAME</div>
                                            <div class="metric-value">Contoso Enterprise</div>
                                            <div class="metric-subtext">Enterprise Suite Renewal + Expansion</div>
                                        </div>
                                    </div>
                                    <div class="metrics-row">
                                        <div class="metrics-cell">
                                            <div class="metric-label">DEAL VALUE</div>
                                            <div class="metric-value">$850K ARR</div>
                                            <div class="metric-subtext">3.2x expansion from current</div>
                                        </div>
                                        <div class="metrics-cell">
                                            <div class="metric-label">HEALTH STATUS</div>
                                            <div class="metric-value red">üî¥ CRITICAL</div>
                                            <div class="metric-subtext">42/100 Health Score</div>
                                        </div>
                                        <div class="metrics-cell">
                                            <div class="metric-label">TARGET CLOSE DATE</div>
                                            <div class="metric-value">Dec 15, 2024</div>
                                            <div class="metric-subtext yellow">12 days remaining</div>
                                        </div>
                                    </div>
                                </div>

                                <div class="health-breakdown">
                                    <div style="font-size: 12px; font-weight: 700; text-transform: uppercase; margin-bottom: 8px; color: #605e5c;">
                                        HEALTH BREAKDOWN
                                    </div>
                                    <div class="health-item">
                                        <span class="health-label">‚Ä¢ Engagement</span>
                                        <span class="health-score">
                                            <span class="health-value red">35/100</span>
                                            <span class="health-indicator indicator-red"></span>
                                            <span style="color: #dc2626; font-size: 11px;">(No stakeholder touch in 23 days)</span>
                                        </span>
                                    </div>
                                    <div class="health-item">
                                        <span class="health-label">‚Ä¢ Momentum</span>
                                        <span class="health-score">
                                            <span class="health-value red">28/100</span>
                                            <span class="health-indicator indicator-red"></span>
                                            <span style="color: #dc2626; font-size: 11px;">(Stalled 52 days in stage)</span>
                                        </span>
                                    </div>
                                    <div class="health-item">
                                        <span class="health-label">‚Ä¢ Alignment</span>
                                        <span class="health-score">
                                            <span class="health-value yellow">65/100</span>
                                            <span class="health-indicator indicator-yellow"></span>
                                            <span style="color: #eab308; font-size: 11px;">(Budget confirmed, timeline slipping)</span>
                                        </span>
                                    </div>
                                    <div class="health-item">
                                        <span class="health-label">‚Ä¢ Completeness</span>
                                        <span class="health-score">
                                            <span class="health-value yellow">48/100</span>
                                            <span class="health-indicator indicator-yellow"></span>
                                            <span style="color: #eab308; font-size: 11px;">(Missing exec briefing, quote not sent)</span>
                                        </span>
                                    </div>
                                    <div class="health-item">
                                        <span class="health-label">‚Ä¢ Risk</span>
                                        <span class="health-score">
                                            <span class="health-value red">34/100</span>
                                            <span class="health-indicator indicator-red"></span>
                                            <span style="color: #dc2626; font-size: 11px;">(2 competitors active, key contact ghosting)</span>
                                        </span>
                                    </div>
                                </div>

                                <div class="activity-timeline">
                                    <div style="font-size: 11px; font-weight: 700; text-transform: uppercase; margin-bottom: 8px; color: #605e5c;">
                                        LAST ACTIVITIES
                                    </div>
                                    <div class="timeline-item">
                                        <span class="timeline-date">52 days ago:</span>
                                        <span class="timeline-content">Email sent - Proposal follow-up (no response)</span>
                                    </div>
                                    <div class="timeline-item">
                                        <span class="timeline-date">65 days ago:</span>
                                        <span class="timeline-content">Meeting - Product demonstration (6 attendees)</span>
                                    </div>
                                    <div class="timeline-item">
                                        <span class="timeline-date">78 days ago:</span>
                                        <span class="timeline-content">Phone call - Initial discovery with VP Sales</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                }
            },
            {
                "type": "user",
                "content": "What are the next best actions to save this deal?",
                "typingTime": 1300,
                "delay": 2000
            },
            {
                "type": "agent",
                "content": "I've created a prioritized action plan based on your deal's specific risks. These actions could increase win probability from 38% to 71% if executed immediately.",
                "typingTime": 2000,
                "delay": 1500,
                "agentData": {
                    "html": `
                        <div class="intelligence-framework">
                            <div class="action-framework">
                                <div class="framework-header">üéØ Weekly Checkpoint Framework</div>

                                <div class="action-section">
                                    <div class="action-title" style="color: #dc2626;">NEXT 24 HOURS (HIGHEST PRIORITY)</div>
                                    <div class="action-items">
                                        <div class="action-item">
                                            Call CFO David Park for warm intro to Robert Chen
                                        </div>
                                        <div class="action-meta">
                                            Expected: Agrees to intro within 2 hours<br>
                                            Impact: Save $850K deal from competitor<br>
                                            Time: 30min call THIS AFTERNOON at 2:00 PM
                                        </div>

                                        <div class="action-item" style="margin-top: 12px;">
                                            Emergency stakeholder meeting with your VP Sales
                                        </div>
                                        <div class="action-meta">
                                            Why: Executive escalation required for CFO re-engagement<br>
                                            Bring: ROI calculator, competitive comparison, reference calls<br>
                                            Time: 45 minutes prep, 30 minute meeting
                                        </div>
                                    </div>
                                </div>

                                <div class="action-section">
                                    <div class="action-title" style="color: #eab308;">NEXT 48 HOURS (URGENT)</div>
                                    <div class="action-items">
                                        <div class="action-item">
                                            Draft + send LinkedIn message to CTO Sarah Chen
                                        </div>
                                        <div class="action-meta">
                                            Why: Prime her before exec intro arrives from David Park<br>
                                            Include: Link to similar customer success story (Fabrikam)<br>
                                            Time: 10 minutes
                                        </div>

                                        <div class="action-item" style="margin-top: 12px;">
                                            Prepare CFO meeting materials
                                        </div>
                                        <div class="action-meta">
                                            Include: ROI calculation, 90-day pilot proposal, payment terms<br>
                                            Focus: Cost savings ($2.1M over 3 years), efficiency gains (35%)<br>
                                            Time: 90 minutes
                                        </div>

                                        <div class="action-item" style="margin-top: 12px;">
                                            Schedule architecture review with technical team
                                        </div>
                                        <div class="action-meta">
                                            Attendees: Your solution architect + implementation lead<br>
                                            Goal: Address all technical objections documented in CRM<br>
                                            Time: Send invite now, meeting within 48 hours
                                        </div>
                                    </div>
                                </div>

                                <div class="action-section">
                                    <div class="action-title" style="color: #10b981;">EVERY WEDNESDAY (RHYTHM)</div>
                                    <div class="action-items">
                                        <div class="action-item">
                                            Stakeholder touch cadence (email, call, or meeting)
                                        </div>
                                        <div class="action-item">
                                            Pipeline review with manager - flag risks early
                                        </div>
                                        <div class="action-item">
                                            Update CRM with all activities and next steps
                                        </div>
                                    </div>
                                </div>

                                <div class="red-flag-check">
                                    <div class="red-flag-title">RED FLAG CHECK</div>
                                    <div class="red-flag-text">
                                        ‚Ä¢ If no contact in 4 days = immediate warm outreach via champion<br>
                                        ‚Ä¢ If meeting cancelled = same-day reschedule with urgency messaging<br>
                                        ‚Ä¢ If competitor mentioned = deploy compete team within 24 hours
                                    </div>
                                </div>
                            </div>
                        </div>
                    `
                }
            }
        ];

        let currentMessageIndex = 0;
        let isPlaying = false;
        let isPaused = false;
        let typingInterval = null;

        function startDemo() {
            if (isPlaying && !isPaused) return;

            if (isPaused) {
                isPaused = false;
                document.getElementById('pauseButton').textContent = 'Pause';
            } else {
                isPlaying = true;
                currentMessageIndex = 0;
                document.getElementById('chatContainer').innerHTML = '';
            }

            document.getElementById('playButton').disabled = true;
            playNextMessage();
        }

        function playNextMessage() {
            if (!isPlaying || isPaused) return;

            if (currentMessageIndex >= demoScript.length) {
                isPlaying = false;
                document.getElementById('playButton').disabled = false;
                document.getElementById('playButton').textContent = 'Replay Demo';
                return;
            }

            const message = demoScript[currentMessageIndex];

            setTimeout(() => {
                if (!isPlaying || isPaused) return;

                if (message.type === 'user') {
                    showUserMessage(message.content, message.typingTime);
                } else if (message.type === 'agent') {
                    showAgentMessage(message.content, message.typingTime, message.agentData);
                }

                currentMessageIndex++;

                setTimeout(() => {
                    playNextMessage();
                }, message.typingTime + (message.delay || 1000));

            }, message.delay || 1000);
        }

        function showUserMessage(content, typingTime) {
            const container = document.getElementById('chatContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user-message';

            const bubble = document.createElement('div');
            bubble.className = 'user-message-bubble';

            messageDiv.appendChild(bubble);
            container.appendChild(messageDiv);

            typeText(bubble, content, typingTime);
            container.scrollTop = container.scrollHeight;
        }

        function showAgentMessage(content, typingTime, agentData) {
            const container = document.getElementById('chatContainer');

            // Show typing indicator
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message agent-message';
            typingDiv.innerHTML = `
                <div class="agent-header">
                    <div class="agent-avatar">AI</div>
                    <div class="agent-name">Deal Progression Intelligence</div>
                </div>
                <div class="typing-indicator">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            `;
            container.appendChild(typingDiv);
            container.scrollTop = container.scrollHeight;

            setTimeout(() => {
                if (!isPlaying) return;

                // Remove typing indicator
                container.removeChild(typingDiv);

                // Add actual message
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message agent-message';

                const headerHTML = `
                    <div class="agent-header">
                        <div class="agent-avatar">AI</div>
                        <div class="agent-name">Deal Progression Intelligence</div>
                    </div>
                `;

                const bubble = document.createElement('div');
                bubble.className = 'agent-message-bubble';

                messageDiv.innerHTML = headerHTML;
                messageDiv.appendChild(bubble);
                container.appendChild(messageDiv);

                // Type the text content
                typeText(bubble, content, typingTime, () => {
                    // After typing is complete, add the data visualization
                    if (agentData && agentData.html) {
                        const dataContainer = document.createElement('div');
                        dataContainer.innerHTML = agentData.html;
                        bubble.appendChild(dataContainer);
                    }
                });

                container.scrollTop = container.scrollHeight;

            }, typingTime);
        }

        function typeText(element, text, duration, callback) {
            element.innerHTML = '';
            const chars = text.split('');
            let currentText = '';
            let currentIndex = 0;
            const interval = duration / chars.length;

            typingInterval = setInterval(() => {
                if (!isPlaying || isPaused) {
                    clearInterval(typingInterval);
                    return;
                }

                if (currentIndex < chars.length) {
                    currentText += chars[currentIndex];
                    element.innerHTML = currentText;
                    currentIndex++;

                    const container = document.getElementById('chatContainer');
                    container.scrollTop = container.scrollHeight;
                } else {
                    clearInterval(typingInterval);
                    if (callback) callback();
                }
            }, interval);
        }

        function togglePause() {
            if (!isPlaying) return;

            isPaused = !isPaused;
            document.getElementById('pauseButton').textContent = isPaused ? 'Resume' : 'Pause';

            if (!isPaused) {
                playNextMessage();
            }
        }

        function skipMessage() {
            if (!isPlaying || currentMessageIndex >= demoScript.length) return;

            clearInterval(typingInterval);

            // Clear any existing typing indicators
            const typingIndicators = document.querySelectorAll('.typing-indicator');
            typingIndicators.forEach(indicator => {
                indicator.parentElement.remove();
            });

            currentMessageIndex++;
            playNextMessage();
        }

        function resetDemo() {
            isPlaying = false;
            isPaused = false;
            currentMessageIndex = 0;
            clearInterval(typingInterval);

            document.getElementById('chatContainer').innerHTML = '';
            document.getElementById('playButton').disabled = false;
            document.getElementById('playButton').textContent = '‚ñ∂ Play Demo';
            document.getElementById('pauseButton').textContent = 'Pause';
        }

        // Auto-start demo after page load
        window.addEventListener('load', () => {
            setTimeout(() => {
                // Optional: Auto-start the demo
                // startDemo();
            }, 1000);
        });
    </script>
</body>
</html>